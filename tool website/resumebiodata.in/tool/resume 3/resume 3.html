<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resume Maker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles to mimic the PDF */
        body {
            font-family: 'Times New Roman', serif;
        }
        .resume-container {
            width: 100%;
            margin: 0 auto;
            background: white;
            padding: 30px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            line-height: 1.4;
            font-size: 11pt;
            min-height: 297mm; /* Approximate A4 height */
        }
        .resume-section-title {
            background-color: #e0e0e0;
            padding: 4px 8px;
            margin-top: 15px;
            margin-bottom: 10px;
            font-weight: bold;
            border-bottom: 1px solid #ccc;
        }
        .resume-details p {
            margin-bottom: 2px;
        }
        .resume-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 15px;
        }
        .resume-table th, .resume-table td {
            border: 1px solid #ccc;
            padding: 6px;
            text-align: left;
        }
        .resume-table th {
            background-color: #f0f0f0;
            font-weight: bold;
        }
        .bullet-list {
            list-style-type: disc;
            margin-left: 20px;
            padding-left: 5px; /* Added padding for better alignment */
        }
        .bullet-list li {
            margin-bottom: 2px;
        }
        .declaration {
            margin-top: 25px;
            font-style: italic;
        }
        .personal-details-grid {
            display: grid;
            grid-template-columns: auto 1fr; /* Adjusted for better spacing */
            gap: 4px 12px;
        }
        .contact-details-grid {
            display: grid;
            grid-template-columns: auto 1fr;
            gap: 4px 8px;
        }
        .footer-flex-container {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            margin-top: 30px;
        }
        .footer-flex-container p {
            margin: 0;
        }
        .resume-title {
            text-align: center;
            font-size: 18pt;
            font-weight: bold;
            margin-bottom: 20px;
            text-decoration: underline;
            text-underline-offset: 5px;
            padding-bottom: 10px;
        }
        .resume-header {
            display: grid;
            grid-template-columns: 1fr auto; /* Restore two columns for photo */
            gap: 20px;
            align-items: flex-start;
            margin-bottom: 20px;
        }
        .resume-header.photo-removed {
            grid-template-columns: 1fr; /* Single column when photo is removed */
        }
        .header-left h1, .header-left h2 { margin: 0; }
        .header-left h1 { font-size: 24pt; }
        .header-left h2 { font-size: 14pt; font-weight: normal; color: #333; }
        .header-right { width: 120px; height: 150px; border: 1px solid #ccc; }
        .header-right img { width: 100%; height: 100%; object-fit: cover; }

        /* Print styles */
        @page {
            size: A4;
            margin: 0.5in;
        }
        @media print {
            body {
                -webkit-print-color-adjust: exact;
                margin: 0 !important;
                padding: 0 !important;
                background-color: white !important;
            }
            .container.mx-auto.grid {
                display: block !important;
                padding: 0 !important;
            }
            .resume-section-title {
                background-color: #e0e0e0 !important;
            }
            .resume-table th {
                background-color: #f0f0f0 !important;
            }
            .input-panel, .print-button-container, nav, .ad-placeholder, footer, .print-hide {
                display: none !important;
            }
            .resume-preview-wrapper, .resume-container {
                box-shadow: none !important;
                padding: 0 !important;
                margin: 0 !important;
                border: none !important;
                width: 100% !important;
                max-width: none !important;
                min-height: 0 !important;
            }
        }

        /* Form layout styles */
        .qualification-row {
            display: flex;
            gap: 10px;
            align-items: center;
            border: 1px solid #e0e0e0;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 10px;
            flex-wrap: wrap; /* Allow wrapping on small screens */
        }
        .qualification-row input { flex: 1; min-width: 120px; }
        .qualification-row .remove-qual-btn { flex-shrink: 0; }

        .print-btn {
            background-color: #1a56db; color: white;
            padding: 0.75rem 1.5rem; border-radius: 0.375rem;
            font-weight: bold; cursor: pointer; transition: background-color 0.3s ease;
        }
        .print-btn:hover { background-color: #1e40af; }
        
        .input-panel { width: 100%; }
        @media (min-width: 1024px) { /* On large screens */
            .container.mx-auto.grid {
                grid-template-columns: 2.5fr 2.5fr;
            }
        }

        /* Drag and Drop styles */
        .draggable {
            cursor: grab;
            transition: background-color 0.2s ease;
            position: relative; /* Needed for arrow positioning */
            padding-left: 20px; /* Space for the arrow */
        }
        .draggable:hover {
            background-color: #f3f4f6;
        }
        .dragging {
            opacity: 0.5;
            background-color: #e5e7eb;
        }
        .dynamic-item-wrapper.custom-item {
            cursor: grab;
            transition: background-color 0.2s ease;
        }
        /* Style for the arrow icon */
        .drag-handle {
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.2rem;
            color: #9ca3af; /* Gray color */
            pointer-events: none; /* Ignore mouse events on the arrow itself */
            cursor: grab;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <nav class="bg-blue-600 text-white shadow-md print-hide">
    <div class="container mx-auto px-4 py-2 flex items-center justify-between">
        <a href="#" class="text-white font-bold text-lg hover:text-gray-200">ResumeBiodata.in</a>
        <div class="flex items-center space-x-6">
            <a href="#" class="hover:underline">Home</a>
            <a href="#" class="hover:underline">Tools</a>
            <a href="#" class="hover:underline">About</a>
            <a href="#" class="hover:underline">Contact</a>
            <a href="#" class="hover:underline">Privacy Policy</a>
            <a href="#" class="hover:underline">Blog</a>
        </div>
    </div>
</nav>
    
    <div class="container mx-auto my-4 ad-placeholder print-hide">
        <div class="bg-gray-300 text-center p-4 rounded">AdSense Ad Placeholder (728x90)</div>
    </div>

    <div class="container mx-auto grid grid-cols-1 lg:grid-cols-2 gap-6 p-4">
        <div class="bg-white p-6 rounded shadow-md h-full input-panel">
            <h2 class="text-xl font-semibold mb-4">Fill Your Resume Details</h2>
            <form id="resume-form" class="space-y-3 text-sm">
                <div class="form-section mb-5">
                    <h3 class="font-bold text-base mt-4 border-b pb-1 mb-2">Personal Information</h3>
                    <input type="text" id="full-name" class="w-full p-2 border rounded" placeholder="Full Name (e.g., Shreyas D. Rathod) *" required value="Shreyas D. Rathod">
                    <label for="profile-photo" class="block mt-2 mb-1">Profile Photo</label>
                    <input type="file" id="profile-photo" class="w-full p-2 border rounded" accept="image/*">
                    <button type="button" class="remove-photo-btn w-full p-2 mt-2 rounded bg-red-600 text-white font-bold cursor-pointer hover:bg-red-700" onclick="removePhoto()">Remove Photo</button>
                </div>

                <div class="form-section mb-5">
                    <h3 class="font-bold text-base mt-4 border-b pb-1 mb-2">Contact Information</h3>
                    <textarea id="address" class="w-full p-2 border rounded" placeholder="Address (e.g., At Post Ambajogai...)" rows="3">At Post Ambajogai, Tal. Ambajogai, Dist. Beed</textarea>
                    <input type="tel" id="mobile" class="w-full p-2 border rounded mt-2" placeholder="Mobile Number *" required value="+91-9123456789">
                    <input type="email" id="email" class="w-full p-2 border rounded mt-2" placeholder="Email ID" value="shreyas.rathod@gmail.com">
                </div>

                <div class="form-section mb-5">
                    <h3 class="font-bold text-base mt-4 border-b pb-1 mb-2">Career Objective</h3>
                    <textarea id="career-objective" class="w-full p-2 border rounded" rows="4">Aim to be associated with a progressive organization that gives scope to apply my skills, knowledge and involve me as part of team that will work dynamically towards the growth of organization.</textarea>
                </div>
                
                <div class="ad-placeholder h-24 bg-gray-200 border-2 border-dashed flex items-center justify-center my-5 text-gray-500">Advertisement 1</div>

                <div class="form-section mb-5">
                    <h3 class="font-bold text-base mt-4 border-b pb-1 mb-2">Academic Qualification</h3>
                    <div id="academic-qualification-container"></div>
                    <button type="button" class="w-full p-2 mt-2 rounded bg-green-600 text-white font-bold cursor-pointer hover:bg-green-700" onclick="addQualificationRow()">+ Add Qualification</button>
                </div>

                <div class="form-section dynamic-section mb-5" id="other-qualification-section">
                    <h3 class="font-bold text-base mt-4 border-b pb-1 mb-2">Other Qualification</h3>
                    <div class="dynamic-inputs"></div>
                    <button type="button" class="w-full p-2 mt-2 rounded bg-green-600 text-white font-bold cursor-pointer hover:bg-green-700" onclick="addDynamicField('other-qualification-section')">+ Add Other Qualification</button>
                </div>

                <div class="form-section dynamic-section mb-5" id="experience-section">
                    <h3 class="font-bold text-base mt-4 border-b pb-1 mb-2">Work Experience</h3>
                    <div class="dynamic-inputs"></div>
                    <button type="button" class="w-full p-2 mt-2 rounded bg-green-600 text-white font-bold cursor-pointer hover:bg-green-700" onclick="addDynamicField('experience-section')">+ Add Experience</button>
                </div>
                
                <div id="custom-section-container"></div>
                <div id="custom-section-adder-container">
                    <button type="button" class="w-full p-2 mt-2 rounded bg-blue-500 text-white font-bold cursor-pointer hover:bg-blue-600" onclick="addCustomSection()">+ Add Custom Section</button>
                </div>
                
                <div class="form-section dynamic-section mb-5" id="personal-details-section">
                    <h3 class="font-bold text-base mt-4 border-b pb-1 mb-2">Personal Details</h3>
                    <div class="dynamic-inputs">
                        <div class="dynamic-item-wrapper draggable flex items-center gap-2 mb-2" id="detail-father-name" draggable="true">
                           <span class="drag-handle">&#x2195;</span>
                           <input type="text" id="father-name" class="w-full p-2 border rounded" placeholder="Father's Name *" value="Father's Name">
                        </div>
                        <div class="dynamic-item-wrapper draggable flex items-center gap-2 mb-2" id="detail-dob" draggable="true">
                            <span class="drag-handle">&#x2195;</span>
                            <label for="dob" class="block w-2/5">Date of Birth *</label>
                            <input type="date" id="dob" class="w-full p-2 border rounded" value="2001-01-01">
                        </div>
                        <div class="dynamic-item-wrapper draggable flex items-center gap-2 mb-2" id="detail-languages" draggable="true">
                           <span class="drag-handle">&#x2195;</span>
                           <input type="text" id="languages" class="w-full p-2 border rounded" placeholder="Languages Known (e.g., Marathi, Hindi, English)" value="Marathi, Hindi, English">
                        </div>
                        <div class="dynamic-item-wrapper draggable flex items-center gap-2 mb-2" id="detail-gender" draggable="true">
                           <span class="drag-handle">&#x2195;</span>
                           <select id="gender" class="w-full p-2 border rounded"><option value="Male">Male</option><option value="Female">Female</option><option value="Other">Other</option></select>
                        </div>
                        <div class="dynamic-item-wrapper draggable flex items-center gap-2 mb-2" id="detail-nationality" draggable="true">
                           <span class="drag-handle">&#x2195;</span>
                           <input type="text" id="nationality" class="w-full p-2 border rounded" placeholder="Nationality *" value="Indian">
                        </div>
                        <div class="dynamic-item-wrapper draggable flex items-center gap-2 mb-2" id="detail-marital-status" draggable="true">
                            <span class="drag-handle">&#x2195;</span>
                            <select id="marital-status" class="w-full p-2 border rounded"><option value="Unmarried">Unmarried</option><option value="Married">Married</option><option value="Widow">Widow</option></select>
                        </div>
                    </div>
                    <button type="button" class="w-full p-2 mt-2 rounded bg-green-600 text-white font-bold cursor-pointer hover:bg-green-700" onclick="addPersonalDetail()">+ Add Item</button>
                </div>

                <div class="form-section mb-5">
                    <h3 class="font-bold text-base mt-4 border-b pb-1 mb-2">Declaration</h3>
                    <textarea id="declaration" class="w-full p-2 border rounded" rows="3">I hereby declare that the above information given by me is true to the best of my knowledge.</textarea>
                    <input type="text" id="place" class="w-full p-2 border rounded mt-2" placeholder="Place (e.g., Ambajogai) *" value="Ambajogai">
                    <label for="date" class="block mt-2 mb-1">Date</label>
                    <input type="date" id="date" class="w-full p-2 border rounded">
                </div>
            </form>
            <div class="ad-placeholder h-24 bg-gray-200 border-2 border-dashed flex items-center justify-center my-5 text-gray-500">Advertisement 2</div>
        </div>

        <div class="preview-container w-full resume-preview-wrapper">
            <h2 class="text-xl font-semibold mb-4 print-hide">Resume Preview</h2>
            <div id="resume-preview" class="resume-container">
                <div class="resume-title">RESUME</div>

                <div class="resume-header">
                    <div class="header-left">
                        <h1 id="preview-name" class="text-3xl font-bold"></h1>
                        <h2 id="preview-profile-title" class="text-lg"></h2>
                        <div class="contact-details-grid mt-4">
                            <b>Address:</b> <span id="preview-address"></span>
                            <b>Mobile:</b> <span id="preview-mobile"></span>
                            <b>Email:</b> <span id="preview-email"></span>
                        </div>
                    </div>
                    <div class="header-right hidden">
                        <img id="preview-photo" src="" alt="Profile Photo">
                    </div>
                </div>
                
                <div id="preview-career-objective-section" style="display: none;">
                    <div class="resume-section-title">CAREER OBJECTIVE</div>
                    <p id="preview-career-objective" class="text-justify"></p>
                </div>
                
                <div id="preview-academic-section" style="display: none;">
                    <div class="resume-section-title">ACADEMIC QUALIFICATION</div>
                    <table class="resume-table">
                        <thead>
                            <tr>
                                <th>Sr. No.</th>
                                <th>Qualification</th>
                                <th>University / Board</th>
                                <th>Year</th>
                                <th>Percentage / CGPA</th>
                            </tr>
                        </thead>
                        <tbody id="preview-academic-tbody"></tbody>
                    </table>
                </div>

                <div id="preview-other-qualification-section" style="display: none;">
                    <div class="resume-section-title">OTHER QUALIFICATION</div>
                    <ul class="bullet-list preview-list"></ul>
                </div>

                <div id="preview-experience-section" style="display: none;">
                    <div class="resume-section-title">WORK EXPERIENCE</div>
                    <ul class="bullet-list preview-list"></ul>
                </div>
                
                <div id="preview-custom-sections-container"></div>

                <div id="preview-personal-details-section" style="display: none;">
                    <div class="resume-section-title">PERSONAL DETAILS</div>
                    <div class="personal-details-grid" id="preview-personal-details-grid">
                    </div>
                </div>

                <div id="preview-declaration-section" style="display: none;">
                    <div class="resume-section-title">DECLARATION</div>
                    <p id="preview-declaration" class="declaration"></p>
                </div>

                <div class="footer-flex-container">
                    <div>
                        <p><b>Date:</b> <span id="preview-date"></span></p>
                        <p><b>Place:</b> <span id="preview-place"></span></p>
                    </div>
                    <div>
                        <p id="preview-signature" class="text-center"></p>
                    </div>
                </div>

            </div>
            <div class="print-button-container text-center mt-4 print-hide">
                <button onclick="window.print()" class="print-btn">Print / Save as PDF</button>
            </div>
            <div class="ad-placeholder h-24 bg-gray-200 border-2 border-dashed flex items-center justify-center my-5 text-gray-500">Advertisement 3</div>
        </div>
    </div>

    <footer class="bg-blue-600 text-white text-center p-4 mt-6 print-hide">
        <p>&copy; 2025 Resume Maker | Designed by Shreyas Rathod</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('resume-form').addEventListener('input', updatePreview);
            document.getElementById('profile-photo').addEventListener('change', updatePhoto);

            const today = new Date().toISOString().split('T')[0];
            const dateField = document.getElementById('date');
            if (dateField) dateField.value = today;

            addQualificationRow({ qualification: 'SSC', university: 'Maharashtra State Board', year: '2017', percentage: '85.00%' });
            addQualificationRow({ qualification: 'HSC', university: 'Maharashtra State Board', year: '2019', percentage: '65.00%' });
            addQualificationRow({ qualification: 'B.PHARMACY', university: 'Dr. Babasaheb Ambedkar Technological University Lonere', year: '2023', percentage: '8.16 CGPA' });

            addDynamicField('other-qualification-section', 'MS-CIT');
            addDynamicField('experience-section', '6 Months experience at Gufic Life sciences pvt.ltd Navsari, Gujarat.');
            
            updatePreview();

            setupPersonalDetailsDragAndDrop();
        });

        function updatePreview() {
            const mappings = {
                'full-name': 'preview-name',
                'profile-title': 'preview-profile-title',
                'mobile': 'preview-mobile',
                'email': 'preview-email',
                'career-objective': 'preview-career-objective',
                'declaration': 'preview-declaration',
                'place': 'preview-place',
            };

            for (const [inputId, previewId] of Object.entries(mappings)) {
                const inputElement = document.getElementById(inputId);
                const previewElement = document.getElementById(previewId);
                if (inputElement && previewElement) {
                    let valueToDisplay = inputElement.value.trim();
                    if (valueToDisplay === '' && inputElement.placeholder) {
                        valueToDisplay = inputElement.placeholder;
                    }
                    previewElement.innerText = valueToDisplay;

                    const section = previewElement.closest('div[id^="preview-"]');
                    if(section && section.id.endsWith('-section')){
                       section.style.display = valueToDisplay !== '' ? 'block' : 'none';
                    }
                }
            }
            
            const addressInput = document.getElementById('address');
            let addressToDisplay = addressInput.value.trim();
            if (addressToDisplay === '' && addressInput.placeholder) {
                addressToDisplay = addressInput.placeholder;
            }
            document.getElementById('preview-address').innerHTML = addressToDisplay.replace(/\n/g, '<br>');
            
            document.getElementById('preview-date').innerText = formatDate(document.getElementById('date').value);
            document.getElementById('preview-signature').innerText = `(${document.getElementById('full-name').value})`;
            
            const hasPersonalDetails = updatePersonalDetailsPreview();
            document.getElementById('preview-personal-details-section').style.display = hasPersonalDetails ? 'block' : 'none';

            updateQualificationTable();
            updateDynamicList('other-qualification-section');
            updateDynamicList('experience-section');
            updateCustomSectionsPreview();
        }
        
        // --- Drag and Drop Functions ---
        let draggingItem = null;

        function setupPersonalDetailsDragAndDrop() {
            const container = document.getElementById('personal-details-section').querySelector('.dynamic-inputs');
            
            container.addEventListener('dragstart', (e) => {
                if (e.target.closest('.draggable')) {
                    draggingItem = e.target.closest('.draggable');
                    e.target.closest('.draggable').classList.add('dragging');
                    e.dataTransfer.effectAllowed = 'move';
                    e.dataTransfer.setData('text/plain', null); // Required for Firefox
                }
            });

            container.addEventListener('dragover', (e) => {
                e.preventDefault();
                const targetItem = e.target.closest('.draggable');
                if (targetItem && targetItem !== draggingItem) {
                    const rect = targetItem.getBoundingClientRect();
                    const next = (e.clientY - rect.top) / rect.height > 0.5;
                    const referenceNode = next ? targetItem.nextElementSibling : targetItem;
                    container.insertBefore(draggingItem, referenceNode);
                }
            });

            container.addEventListener('dragend', (e) => {
                if (draggingItem) {
                    draggingItem.classList.remove('dragging');
                    draggingItem = null;
                }
                updatePreview();
            });
        }

        // --- END of Drag and Drop Functions ---

        function updatePersonalDetailsPreview() {
            const previewGrid = document.getElementById('preview-personal-details-grid');
            previewGrid.innerHTML = '';
            
            const standardDetailsMap = {
                'detail-father-name': { label: "Father's Name:", id: 'father-name' },
                'detail-dob': { label: 'Date of Birth:', id: 'dob', formatter: formatDate },
                'detail-languages': { label: 'Languages Known:', id: 'languages' },
                'detail-gender': { label: 'Gender:', id: 'gender' },
                'detail-nationality': { label: 'Nationality:', id: 'nationality' },
                'detail-marital-status': { label: 'Marital Status:', id: 'marital-status' },
            };
            
            const detailsContainers = document.querySelectorAll('#personal-details-section .dynamic-inputs > .dynamic-item-wrapper');
            let hasContent = false;

            detailsContainers.forEach(container => {
                const detailId = container.id;
                
                if (detailId.startsWith('detail-')) {
                    const detailInfo = standardDetailsMap[detailId];
                    if (detailInfo) {
                        const inputElement = container.querySelector(`#${detailInfo.id}`);
                        if (inputElement) {
                            let valueToDisplay = inputElement.value.trim();
                            if (valueToDisplay === '' && inputElement.placeholder && inputElement.tagName !== 'SELECT') {
                                valueToDisplay = inputElement.placeholder;
                            } else if (inputElement.tagName === 'SELECT' && valueToDisplay === '') {
                                valueToDisplay = inputElement.options[inputElement.selectedIndex].text;
                            }

                            if (valueToDisplay !== '') {
                                hasContent = true;
                                const value = detailInfo.formatter ? detailInfo.formatter(valueToDisplay) : valueToDisplay;
                                const label = document.createElement('b');
                                label.textContent = detailInfo.label;
                                const span = document.createElement('span');
                                span.textContent = value;
                                previewGrid.appendChild(label);
                                previewGrid.appendChild(span);
                            }
                        }
                    }
                } else if (container.classList.contains('custom-item')) {
                    const keyInput = container.querySelector('.key-input');
                    const valueInput = container.querySelector('.value-input');
                    
                    let keyToDisplay = keyInput.value.trim();
                    if (keyToDisplay === '' && keyInput.placeholder) {
                        keyToDisplay = keyInput.placeholder;
                    }

                    let valueToDisplay = valueInput.value.trim();
                    if (valueToDisplay === '' && valueInput.placeholder) {
                        valueToDisplay = valueInput.placeholder;
                    }

                    if (keyToDisplay !== '' && valueToDisplay !== '') {
                        hasContent = true;
                        const keyLabel = document.createElement('b');
                        keyLabel.textContent = `${keyToDisplay}:`;
                        const valueSpan = document.createElement('span');
                        valueSpan.textContent = valueToDisplay;
                        previewGrid.appendChild(keyLabel);
                        previewGrid.appendChild(valueSpan);
                    }
                }
            });

            return hasContent;
        }

        function formatDate(dateString) {
            if (!dateString) return '';
            const [year, month, day] = dateString.split('-');
            return `${day}-${month}-${year}`;
        }

        function updatePhoto(event) {
            const photoContainer = document.querySelector('.header-right');
            const header = document.querySelector('.resume-header');
            if (event.target.files && event.target.files[0]) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    document.getElementById('preview-photo').src = e.target.result;
                    photoContainer.classList.remove('hidden');
                    header.classList.remove('photo-removed');
                };
                reader.readAsDataURL(event.target.files[0]);
            } else {
                removePhoto();
            }
        }

        function removePhoto() {
            document.getElementById('profile-photo').value = null;
            document.querySelector('.header-right').classList.add('hidden');
            document.querySelector('.resume-header').classList.add('photo-removed');
            document.getElementById('preview-photo').src = "";
        }
        
        function addQualificationRow(data = {}) {
            const container = document.getElementById('academic-qualification-container');
            const row = document.createElement('div');
            row.className = 'qualification-row';
            row.innerHTML = `
                <input type="text" class="input-field qual-edu" placeholder="Qualification" value="${data.qualification || ''}">
                <input type="text" class="input-field qual-university" placeholder="University / Board" value="${data.university || ''}">
                <input type="text" class="input-field qual-year" placeholder="Year" value="${data.year || ''}">
                <input type="text" class="input-field qual-percent" placeholder="Percentage / CGPA" value="${data.percentage || ''}">
                <button type="button" onclick="removeRow(this, 'qualification-row')" class="remove-qual-btn bg-red-500 text-white px-2 py-1 rounded text-xs">X</button>`;
            container.appendChild(row);
        }
        
        function updateQualificationTable() {
            const tbody = document.getElementById('preview-academic-tbody');
            const rows = document.querySelectorAll('#academic-qualification-container .qualification-row');
            tbody.innerHTML = '';
            let hasContent = false;
            rows.forEach((row, index) => {
                const inputs = row.querySelectorAll('input');
                const [q, u, y, p] = Array.from(inputs).map(i => i.value.trim());
                if (q || u || y || p) {
                    hasContent = true;
                    const newRow = tbody.insertRow();
                    newRow.innerHTML = `
                        <td class="border-left p-1 text-center">${index + 1}</td>
                        <td class="p-1">${q}</td>
                        <td class="p-1">${u}</td>
                        <td class="p-1 text-center">${y}</td>
                        <td class="p-1 text-center">${p}</td>`;
                }
            });
            document.getElementById('preview-academic-section').style.display = hasContent ? 'block' : 'none';
        }

        function addDynamicField(sectionId, value = '') {
            const container = document.querySelector(`#${sectionId} .dynamic-inputs`);
            const newItemWrapper = document.createElement('div');
            newItemWrapper.className = 'dynamic-item-wrapper flex items-center gap-2 mb-2';
            newItemWrapper.innerHTML = `
                <input type="text" class="input-field w-full p-2 border rounded" placeholder="Enter details here" value="${value}">
                <button type="button" class="remove-item-btn bg-transparent border-none text-red-500 text-2xl" onclick="removeRow(this, 'dynamic-item-wrapper')">❌</button>`;
            container.appendChild(newItemWrapper);
            if (value) updatePreview();
        }
        
        function addPersonalDetail() {
            const container = document.getElementById('personal-details-section').querySelector('.dynamic-inputs');
            const newDetailWrapper = document.createElement('div');
            newDetailWrapper.className = 'dynamic-item-wrapper custom-item flex items-center gap-2 mb-2 draggable';
            newDetailWrapper.id = 'detail-' + Date.now();
            newDetailWrapper.setAttribute('draggable', 'true');
            newDetailWrapper.innerHTML = `
                <span class="drag-handle">&#x2195;</span>
                <input type="text" class="input-field key-input w-2/5 p-2 border rounded" placeholder="e.g., Religion">
                <input type="text" class="input-field value-input w-3/5 p-2 border rounded" placeholder="e.g., Hindu">
                <button type="button" class="remove-item-btn bg-transparent border-none text-red-500 text-2xl" onclick="removeRow(this, 'dynamic-item-wrapper')">❌</button>
            `;
            container.appendChild(newDetailWrapper);
        }

        function updateDynamicList(sectionId) {
            const inputs = document.querySelectorAll(`#${sectionId} .dynamic-inputs .input-field`);
            const previewSection = document.getElementById(`preview-${sectionId}`);
            if (!previewSection) return;
            
            const previewList = previewSection.querySelector('.preview-list');
            previewList.innerHTML = '';
            let hasContent = false;
            inputs.forEach(input => {
                if (input.value.trim() !== '') {
                    hasContent = true;
                    const li = document.createElement('li');
                    li.textContent = input.value;
                    previewList.appendChild(li);
                }
            });
            previewSection.style.display = hasContent ? 'block' : 'none';
        }
        
        function addCustomSection() {
            const sectionId = `custom-section-${Date.now()}`;
            const container = document.getElementById('custom-section-container');
            const newSectionDiv = document.createElement('div');
            newSectionDiv.className = 'form-section dynamic-section custom-section-form mb-5 border-2 border-dashed border-blue-500 p-3 rounded';
            newSectionDiv.id = sectionId;
            newSectionDiv.innerHTML = `
                <div class="flex justify-between items-center mb-2">
                    <input type="text" class="custom-title-input w-full p-2 border rounded font-bold" placeholder="Section Title (e.g., Skills)">
                    <button type="button" class="bg-red-500 text-white px-3 py-1 rounded ml-2" onclick="removeRow(this, 'custom-section-form')">Remove Section</button>
                </div>
                <div class="dynamic-inputs"></div>
                <button type="button" class="w-full p-2 mt-2 rounded bg-green-600 text-white font-bold" onclick="addDynamicField('${sectionId}')">+ Add Item</button>`;
            container.appendChild(newSectionDiv);
            addDynamicField(sectionId);
        }
        
        function updateCustomSectionsPreview() {
            const formSections = document.querySelectorAll('.custom-section-form');
            const previewContainer = document.getElementById('preview-custom-sections-container');
            previewContainer.innerHTML = '';
            
            formSections.forEach(formSection => {
                const title = formSection.querySelector('.custom-title-input').value.trim();
                const inputs = formSection.querySelectorAll('.dynamic-inputs .input-field');
                const items = Array.from(inputs).map(i => i.value.trim()).filter(Boolean);

                if (title && items.length > 0) {
                    const previewSection = document.createElement('div');
                    let listHTML = items.map(item => `<li>${item}</li>`).join('');
                    
                    previewSection.innerHTML = `
                        <div class="resume-section-title">${title.toUpperCase()}</div>
                        <ul class="bullet-list preview-list">${listHTML}</ul>`;
                    previewContainer.appendChild(previewSection);
                }
            });
        }

        function removeRow(button, parentClass) {
            button.closest(`.${parentClass}`).remove();
            updatePreview();
        }
    </script>
</body>
</html>