<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online Image Resizer & Compressor - ResumeBiodata.in</title>
    <meta name="description" content="Resize and compress images for free with our online tool. Instantly adjust dimensions, quality, and format (JPG, PNG, WEBP) for websites, social media, and more.">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        @keyframes fadeUp {
            0% { opacity: 0; transform: translateY(20px); }
            100% { opacity: 1; transform: translateY(0); }
        }
        .tool-card {
            opacity: 0;
            transform: translateY(20px);
            animation: fadeUp 0.6s forwards;
        }
        .tool-section { padding: 4rem 0; }
        .tool-container { display: flex; gap: 2rem; align-items: flex-start; }
        .upload-area, .settings-area {
            background-color: #fff;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            flex: 1;
        }
        
        /* Stylish Upload Box */
        .upload-box {
            width: 100%;
            border: 2px dashed #e0e7ff;
            background-color: #f8faff;
            border-radius: 12px;
            padding: 1.5rem;
            margin-top: 1rem;
            margin-bottom: 1rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 350px;
            position: relative;
            overflow: hidden;
            transition: border-color 0.3s, background-color 0.3s, box-shadow 0.3s;
            cursor: pointer;
        }
        .upload-box.dragover {
            border-color: #3b82f6;
            background-color: #e0f2fe;
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.15);
        }
        
        /* Upload prompt with improved spacing and color */
        #upload-prompt { 
            text-align: center;
            color: #6b7280;
            padding: 1rem;
            pointer-events: none;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        #upload-prompt svg {
            color: #60a5fa;
            margin-bottom: 1rem;
        }
        #upload-prompt h4 {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #1f2937;
        }
        #upload-prompt p {
            font-size: 0.95rem;
        }

        #image-preview-container img { max-width: 100%; max-height: 330px; object-fit: contain; }
        
        .image-details {
            margin-top: -0.25rem;
            margin-bottom: 1rem;
            padding: 0.5rem;
            font-size: 0.9rem;
            color: #555;
            text-align: center;
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            border-top: none;
            border-radius: 0 0 8px 8px;
            min-height: 36px;
        }
        .btn-primary {
            background-color: #3b82f6;
            color: #fff;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s;
            width: 100%;
        }
        .btn-primary:hover { background-color: #2563eb; }
        .btn-primary:disabled { background-color: #93c5fd; cursor: not-allowed; }
        .loader-container {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255, 255, 255, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10;
        }
        .loader {
            border: 5px solid #f3f3f3;
            border-top: 5px solid #3b82f6;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .hidden { display: none !important; }
        .form-group, .form-group-inline { margin-bottom: 1.2rem; }
        .form-group label { display: block; margin-bottom: 0.5rem; font-weight: 500; }
        .form-group input, .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        input[type="range"] { padding: 0; }
        .dimension-group, .size-group { display: flex; gap: 1rem; }
        .dimension-group > div, .size-group > div { flex: 1; }
        .ad-placeholder {
            height: 90px;
            background-color: #f0f0f0;
            border: 1px solid #e0e0e0;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 1.5rem 0;
            color: #999;
            border-radius: 4px;
        }
        
        /* Responsive CSS */
        @media (max-width: 768px) {
            .tool-container { flex-direction: column; }
            .tool-section { padding: 2rem 0; }
            .upload-area, .settings-area { padding: 1.5rem; }
            #upload-prompt h4 { font-size: 1.1rem; }
            #upload-prompt p { font-size: 0.875rem; }
        }
    </style>
</head>
<body class="bg-gray-50">

    <nav class="bg-blue-600 shadow-md sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 py-3 flex justify-between items-center">
            <a href="#" class="text-2xl font-bold text-white">ResumeBiodata.in</a>
            <ul class="flex space-x-6 text-white font-medium">
                <li><a href="#" class="hover:text-yellow-300">Home</a></li>
                <li><a href="#" class="hover:text-yellow-300">Tools</a></li>
                <li><a href="#" class="hover:text-yellow-300">About</a></li>
                <li><a href="#" class="hover:text-yellow-300">Contact</a></li>
                <li><a href="#" class="hover:text-yellow-300">Privacy Policy</a></li>
                <li><a href="#" class="hover:text-yellow-300">Blog</a></li>
            </ul>
        </div>
    </nav>

    <div class="max-w-7xl mx-auto my-6 px-4">
        <div class="bg-gray-200 h-28 flex items-center justify-center rounded-lg shadow-inner">
            <span class="text-gray-500">[ Adsense Ad Space ]</span>
        </div>
    </div>

    <section class="max-w-7xl mx-auto px-4 py-10 tool-section">
        <h2 class="text-3xl font-bold text-center mb-8 text-blue-600">
            Online Image Resizer & Compressor
        </h2>
        <div class="tool-container">
            <div class="upload-area tool-card">
                <h3>Live Image Preview</h3>
                <label for="file-input" class="upload-box" id="upload-box">
                    <div class="loader-container hidden" id="loader-container">
                        <div class="loader"></div>
                    </div>
                    <div id="upload-prompt">
                        <svg width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg>
                        <h4>Upload an Image</h4>
                        <p>Drag & drop files or click to upload</p>
                    </div>
                    <div id="image-preview-container"></div>
                </label>
                <div class="image-details" id="image-info"></div>
                <input type="file" id="file-input" accept="image/*" hidden>
            </div>

            <div class="settings-area tool-card">
                <h3>Real-Time Controls</h3>
                <form id="settings-form">
                    <div class="form-group">
                        <label for="format">Format</label>
                        <select id="format"><option>JPG</option><option>PNG</option><option>WEBP</option></select>
                    </div>
                    <div class="form-group dimension-group">
                        <div>
                            <label for="width">Width</label>
                            <input type="number" id="width" placeholder="Auto">
                        </div>
                        <div>
                            <label for="height">Height</label>
                            <input type="number" id="height" placeholder="Auto">
                        </div>
                        <div>
                            <label for="unit">Unit</label>
                            <select id="unit"><option>px</option><option>cm</option><option>mm</option></select>
                        </div>
                    </div>
                    <div class="form-group" id="quality-section">
                        <label for="quality">Quality (<span id="quality-value">92</span>%)</label>
                        <input type="range" id="quality" min="1" max="100" value="92">
                    </div>
                    <div class="form-group size-group" id="filesize-section">
                        <div>
                            <label for="file-size">Max file size</label>
                            <input type="number" id="file-size" placeholder="e.g., 150">
                        </div>
                        <div>
                            <label for="size-unit">Unit</label>
                            <select id="size-unit"><option>KB</option><option>MB</option></select>
                        </div>
                    </div>
                    <div class="enhancement-section">
                        <h4>Enhancements</h4>
                        <div class="form-group-inline">
                            <input type="checkbox" id="auto-enhance"><label for="auto-enhance">Auto-Enhance (Magic)</label>
                        </div>
                        <div class="form-group">
                            <label for="sharpen">Sharpen (<span id="sharpen-value">0</span>%)</label>
                            <input type="range" id="sharpen" min="0" max="100" value="0">
                        </div>
                    </div>
                    <div class="ad-placeholder">
                        <p>Advertisement</p>
                    </div>
                    <button class="btn-primary" id="download-btn" disabled>Download Image</button>
                </form>
            </div>
        </div>
    </section>

    <footer class="bg-blue-600 py-6 mt-10">
        <div class="max-w-7xl mx-auto text-center text-white">
            © 2025 ResumeBiodata.in. All Rights Reserved.
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const allInputs = document.querySelectorAll('#settings-form input, #settings-form select');
            const uploadBox = document.getElementById('upload-box');
            const fileInput = document.getElementById('file-input');
            const imagePreviewContainer = document.getElementById('image-preview-container');
            const settingsForm = document.getElementById('settings-form');
            const downloadBtn = document.getElementById('download-btn');
            const loader = document.getElementById('loader-container');
            const uploadPrompt = document.getElementById('upload-prompt');
            const imageInfo = document.getElementById('image-info');
            
            const widthInput = document.getElementById('width');
            const heightInput = document.getElementById('height');
            const unitSelect = document.getElementById('unit');
            const qualityValue = document.getElementById('quality-value');
            const sharpenValue = document.getElementById('sharpen-value');
            const qualitySlider = document.getElementById('quality');
            const sharpenSlider = document.getElementById('sharpen');
            const fileSizeInput = document.getElementById('file-size');
            const sizeUnitSelect = document.getElementById('size-unit');

            let originalImage = null;
            let originalFileName = 'image';
            let originalFileSize = 0;
            let isProcessing = false;
            let debounceTimer;

            const debounce = (func, delay) => {
                return (...args) => {
                    clearTimeout(debounceTimer);
                    debounceTimer = setTimeout(() => {
                        func.apply(this, args);
                    }, delay);
                };
            };

            const updatePreview = async () => {
                if (!originalImage || isProcessing) return;
                isProcessing = true;
                loader.classList.remove('hidden');
                requestAnimationFrame(async () => {
                    try {
                        const canvas = document.createElement('canvas');
                        const ctx = canvas.getContext('2d', { willReadFrequently: true });
                        const settings = getSettings();
                        canvas.width = settings.targetWidth;
                        canvas.height = settings.targetHeight;
                        if (settings.filters) ctx.filter = settings.filters;
                        ctx.drawImage(originalImage, 0, 0, settings.targetWidth, settings.targetHeight);
                        ctx.filter = 'none';
                        if (settings.sharpenAmount > 0) applySharpen(ctx, canvas, settings.sharpenAmount);
                        const previewImage = document.getElementById('preview-image');
                        if (previewImage) previewImage.src = canvas.toDataURL('image/jpeg', 0.85);
                    } catch(e) { console.error("Error updating preview:", e); } 
                    finally { isProcessing = false; loader.classList.add('hidden'); }
                });
            };
            
            const debouncedUpdate = debounce(updatePreview, 300);

            allInputs.forEach(input => {
                const eventType = (input.type === 'range' || input.type === 'number') ? 'input' : 'change';
                input.addEventListener(eventType, () => {
                    if (input.id === 'quality') qualityValue.textContent = input.value;
                    if (input.id === 'sharpen') sharpenValue.textContent = input.value;
                    debouncedUpdate();
                });
            });

            fileInput.addEventListener('change', e => handleFile(e.target.files[0]));
            uploadBox.addEventListener('dragover', e => { e.preventDefault(); uploadBox.classList.add('dragover'); });
            uploadBox.addEventListener('dragleave', () => uploadBox.classList.remove('dragover'));
            uploadBox.addEventListener('drop', e => { e.preventDefault(); uploadBox.classList.remove('dragover'); handleFile(e.dataTransfer.files[0]); });

            function handleFile(file) {
                if (!file || !file.type.startsWith('image/')) return;
                originalFileName = file.name.split('.').slice(0, -1).join('.') || 'image';
                originalFileSize = file.size;
                const reader = new FileReader();
                reader.onload = e => {
                    originalImage = new Image();
                    originalImage.onload = () => {
                        imagePreviewContainer.innerHTML = `<img id="preview-image" src="${e.target.result}" alt="Preview">`;
                        uploadPrompt.classList.add('hidden');
                        downloadBtn.disabled = false;
                        widthInput.value = originalImage.width;
                        heightInput.value = originalImage.height;
                        imageInfo.textContent = `${originalImage.width} x ${originalImage.height}  •  ${formatBytes(originalFileSize)}`;
                        updatePreview();
                    };
                    originalImage.src = e.target.result;
                };
                reader.readAsDataURL(file);
            }
            
            settingsForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                if (!originalImage) return;

                downloadBtn.disabled = true;
                downloadBtn.textContent = "Generating...";
                loader.classList.remove('hidden');

                const settings = getSettings();
                const format = document.getElementById('format').value.toLowerCase();
                const mimeType = `image/${format === 'jpg' ? 'jpeg' : format}`;
                const targetFileSize = parseFloat(fileSizeInput.value) * (sizeUnitSelect.value === 'MB' ? 1024 * 1024 : 1024);
                
                let blob;
                
                if (targetFileSize && targetFileSize > originalFileSize) {
                    blob = await getInflatedBlob(settings, mimeType, targetFileSize);
                } else if (targetFileSize && targetFileSize < originalFileSize) {
                    blob = await getCompressedBlob(settings, mimeType, targetFileSize);
                } else {
                    blob = await new Promise(resolve => {
                        const canvas = document.createElement('canvas');
                        const ctx = canvas.getContext('2d', { willReadFrequently: true });
                        canvas.width = settings.targetWidth;
                        canvas.height = settings.targetHeight;
                        if (settings.filters) ctx.filter = settings.filters;
                        ctx.drawImage(originalImage, 0, 0, settings.targetWidth, settings.targetHeight);
                        ctx.filter = 'none';
                        if (settings.sharpenAmount > 0) applySharpen(ctx, canvas, settings.sharpenAmount);
                        const quality = parseInt(qualitySlider.value, 10) / 100;
                        canvas.toBlob(resolve, mimeType, quality);
                    });
                }
                
                downloadBlob(blob, `${originalFileName}-processed.${format}`);
                
                downloadBtn.disabled = false;
                downloadBtn.textContent = "Download Image";
                loader.classList.add('hidden');
            });

            function formatBytes(bytes, decimals = 2) {
                if (bytes === 0) return '0 Bytes';
                const k = 1024;
                const dm = decimals < 0 ? 0 : decimals;
                const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];
            }

            function getSettings() {
                const unit = unitSelect.value;
                let targetWidth = parseFloat(widthInput.value);
                let targetHeight = parseFloat(heightInput.value);
                
                if (!originalImage) return {};

                const DPM = 96 / 2.54;
                
                if (unit === 'cm') {
                    targetWidth = targetWidth * (96 / 2.54);
                    targetHeight = targetHeight * (96 / 2.54);
                } else if (unit === 'mm') {
                    targetWidth = targetWidth * (96 / 25.4);
                    targetHeight = targetHeight * (96 / 25.4);
                }

                const aspectRatio = originalImage.width / originalImage.height;

                if (!targetWidth && !targetHeight) {
                    targetWidth = originalImage.width;
                    targetHeight = originalImage.height;
                } else if (targetWidth && !targetHeight) {
                    targetHeight = targetWidth / aspectRatio;
                } else if (!targetWidth && targetHeight) {
                    targetWidth = targetHeight * aspectRatio;
                }

                let filters = [];
                if (document.getElementById('auto-enhance').checked) {
                    filters.push('brightness(1.1) contrast(1.1) saturate(1.2)');
                }
                const sharpenAmount = parseInt(sharpenSlider.value, 10) / 100;

                return {
                    targetWidth: Math.round(targetWidth),
                    targetHeight: Math.round(targetHeight),
                    filters: filters.join(' '),
                    sharpenAmount: sharpenAmount
                };
            }

            async function getCompressedBlob(settings, mimeType, targetFileSize) {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d', { willReadFrequently: true });
                canvas.width = settings.targetWidth;
                canvas.height = settings.targetHeight;
                if (settings.filters) ctx.filter = settings.filters;
                ctx.drawImage(originalImage, 0, 0, settings.targetWidth, settings.targetHeight);
                ctx.filter = 'none';
                if (settings.sharpenAmount > 0) applySharpen(ctx, canvas, settings.sharpenAmount);

                let quality = 0.9;
                let blob;
                let currentSize;

                do {
                    blob = await new Promise(resolve => canvas.toBlob(resolve, mimeType, quality));
                    currentSize = blob.size;
                    if (currentSize > targetFileSize) {
                        quality -= 0.05;
                    }
                } while (currentSize > targetFileSize && quality > 0.1);

                while (currentSize > targetFileSize && canvas.width > 10) {
                    const ratio = Math.sqrt(targetFileSize / currentSize);
                    canvas.width *= ratio;
                    canvas.height *= ratio;
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    ctx.drawImage(originalImage, 0, 0, canvas.width, canvas.height);
                    blob = await new Promise(resolve => canvas.toBlob(resolve, mimeType, 0.9));
                    currentSize = blob.size;
                }
                
                return blob;
            }

            async function getInflatedBlob(settings, mimeType, targetFileSize) {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d', { willReadFrequently: true });
                
                canvas.width = settings.targetWidth;
                canvas.height = settings.targetHeight;
                if (settings.filters) ctx.filter = settings.filters;
                ctx.drawImage(originalImage, 0, 0, settings.targetWidth, settings.targetHeight);
                ctx.filter = 'none';
                if (settings.sharpenAmount > 0) applySharpen(ctx, canvas, settings.sharpenAmount);

                let blob;
                let currentSize;

                for (let i = 0; i < 20; i++) {
                    const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                    const data = imageData.data;
                    for (let j = 0; j < data.length; j += 4) {
                        const noise = Math.random() * 10 - 5;
                        data[j] = data[j] + noise;
                        data[j+1] = data[j+1] + noise;
                        data[j+2] = data[j+2] + noise;
                    }
                    ctx.putImageData(imageData, 0, 0);

                    blob = await new Promise(resolve => canvas.toBlob(resolve, mimeType, 1.0));
                    currentSize = blob.size;
                    if (currentSize >= targetFileSize) {
                        return blob;
                    }
                }

                return blob;
            }

            function downloadBlob(blob, fileName) {
                const link = document.createElement('a');
                link.href = URL.createObjectURL(blob);
                link.download = fileName;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                URL.revokeObjectURL(link.href);
            }

            function applySharpen(ctx, canvas, amount) {
                const { width, height } = canvas;
                const originalData = ctx.getImageData(0, 0, width, height);
                const blurredData = ctx.getImageData(0, 0, width, height);
                boxBlur(blurredData.data, width, height, 1);
                const sharpenedData = ctx.createImageData(width, height);
                for (let i = 0; i < originalData.data.length; i += 4) {
                    sharpenedData.data[i] = originalData.data[i] + (originalData.data[i] - blurredData.data[i]) * amount;
                    sharpenedData.data[i + 1] = originalData.data[i + 1] + (originalData.data[i + 1] - blurredData.data[i + 1]) * amount;
                    sharpenedData.data[i + 2] = originalData.data[i + 2] + (originalData.data[i + 2] - blurredData.data[i + 2]) * amount;
                    sharpenedData.data[i + 3] = originalData.data[i + 3];
                }
                ctx.putImageData(sharpenedData, 0, 0);
            }
            
            function boxBlur(data, width, height, radius) {
                const temp = new Uint8ClampedArray(data.length);
                temp.set(data);
                for(let y = 0; y < height; y++) {
                    for(let x = 0; x < width; x++) {
                        let r = 0, g = 0, b = 0, count = 0;
                        for(let dy = -radius; dy <= radius; dy++) {
                            for(let dx = -radius; dx <= radius; dx++) {
                                const nx = Math.min(width - 1, Math.max(0, x + dx));
                                const ny = Math.min(height - 1, Math.max(0, y + dy));
                                const i = (ny * width + nx) * 4;
                                r += temp[i]; g += temp[i+1]; b += temp[i+2];
                                count++;
                            }
                        }
                        const i = (y * width + x) * 4;
                        data[i] = r / count; data[i+1] = g / count; data[i+2] = b / count;
                    }
                }
            }
        });
    </script>
</body>
</html>