<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resume Maker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap');
        
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f0f2f5;
        }
        .container {
            max-width: 1200px;
            margin: auto;
            display: flex;
            gap: 2rem;
            padding: 2rem 1rem;
        }
        .form-container, .preview-container {
            flex: 1;
            background-color: #fff;
            padding: 2rem;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            height: fit-content;
        }
        .resume-container {
            border: 1px solid black;
            outline: 2px solid black;
            outline-offset: -5px;
            padding: 2.5rem 1.5rem 0.5rem 1.5rem;
            line-height: 1.3;
            color: #333;
            background-color: #fff;
        }
        .resume-title {
            text-align: center;
            font-size: 1.5rem;
            font-weight: bold;
            text-decoration: underline;
            margin-bottom: 1.5rem;
        }
        .resume-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            border-bottom: 2px solid #333;
            padding-bottom: 1rem;
        }
        .resume-header .header-left {
            flex-grow: 1;
        }
        .resume-header.photo-removed .header-left {
            border-bottom: none;
        }
        .resume-header .header-right {
            width: 120px;
            height: 150px;
            border: 1px solid #ccc;
            overflow: hidden;
            flex-shrink: 0;
            margin-left: 1rem;
        }
        .resume-header .header-right img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .contact-details-grid {
            display: grid;
            grid-template-columns: auto 1fr;
            gap: 0.5rem 1rem;
        }
        .resume-section-title {
            font-size: 1.25rem;
            font-weight: bold;
            border-bottom: 1px solid #666;
            padding-bottom: 0.25rem;
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
        }
        .resume-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }
        .resume-table th, .resume-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        .resume-table th {
            background-color: #f2f2f2;
        }
        .bullet-list.preview-list {
            list-style-type: disc;
            padding-left: 2rem;
        }
        .bullet-list.preview-list li {
            line-height: 1.2;
            margin-bottom: 0;
        }
        .declaration {
            text-align: justify;
        }
        .footer-flex-container {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            margin-top: 2rem;
            padding-top: 1rem;
            border-top: 1px solid #333;
        }
        .print-btn {
            background-color: #007bff;
            color: #fff;
            padding: 10px 20px;
            border-radius: 5px;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .print-btn:hover {
            background-color: #0056b3;
        }
        
        /* New CSS for drag-and-drop */
        .form-section {
            padding: 1rem;
            background-color: #f9fafb;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            margin-bottom: 1rem;
            position: relative;
            transition: transform 0.2s ease-in-out;
        }
        .form-section.dragging {
            opacity: 0.5;
            background-color: #d1d5db;
        }
        .drag-handle {
            cursor: move;
            font-size: 1.5rem;
            color: #aaa;
            position: absolute;
            top: 0.5rem;
            left: 0.5rem;
        }
        .draggable {
            cursor: grab;
        }
        .draggable .drag-handle {
            position: static;
            display: inline-block;
            margin-right: 0.5rem;
        }
        
        @media print {
            body {
                background-color: #fff;
            }
            .form-container, .print-hide, .ad-placeholder, .footer {
                display: none !important;
            }
            .container {
                display: block;
                padding: 0;
            }
            .preview-container {
                width: 100%;
                box-shadow: none;
                padding: 0;
            }
            .resume-container {
                border: 1px solid black;
                outline: 2px solid black;
                outline-offset: -5px;
                box-shadow: none;
                min-height: auto;
                max-width: 8.5in;
                margin: 0;
                padding: 2.5rem 1.5rem 0.5rem 1.5rem;
            }
        }
        
        /* CORRECTED CSS FOR PERSONAL DETAILS GRID */
        #preview-personal-details-grid {
            display: grid;
            grid-template-columns: auto 1fr;
            gap: 0.5rem 1rem;
            align-items: baseline;
        }
        .personal-detail-row b {
            white-space: nowrap;
            padding-right: 0.5rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="form-container" id="form-container">
            <h2 class="text-2xl font-bold text-center mb-6">Resume Maker</h2>
            <form id="resume-form" onsubmit="return false">
                <div class="form-section mb-5" draggable="true">
                    <span class="drag-handle">&#x2195;</span>
                    <h3 class="font-bold text-base mt-4 border-b pb-1 mb-2">Personal & Contact Details</h3>
                    <div class="flex items-center gap-4 mb-4">
                        <div class="flex-1">
                            <input type="text" id="full-name" class="w-full p-2 border rounded" placeholder="Your Full Name *" required>
                            <label for="full-name" class="text-sm text-gray-500 mt-1 block">Full Name</label>
                        </div>
                        <div class="flex-1">
                            <input type="text" id="address" class="w-full p-2 border rounded" placeholder="Address *" required>
                            <label for="address" class="text-sm text-gray-500 mt-1 block">Address</label>
                        </div>
                    </div>
                    <div class="flex items-center gap-4 mb-4">
                        <div class="flex-1">
                            <input type="tel" id="mobile" class="w-full p-2 border rounded" placeholder="Mobile Number *" required>
                            <label for="mobile" class="text-sm text-gray-500 mt-1 block">Mobile Number</label>
                        </div>
                        <div class="flex-1">
                            <input type="email" id="email" class="w-full p-2 border rounded" placeholder="Email Address *" required>
                            <label for="email" class="text-sm text-gray-500 mt-1 block">Email Address</label>
                        </div>
                    </div>
                    <div class="flex items-center gap-4 mb-4">
                        <div class="flex-1">
                            <label for="profile-photo" class="block text-sm font-medium text-gray-700">Profile Photo</label>
                            <input type="file" id="profile-photo" class="w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
                        </div>
                    </div>
                </div>
                
                <div class="ad-placeholder h-24 bg-gray-200 border-2 border-dashed flex items-center justify-center my-5 text-gray-500">Advertisement 1</div>
                
                <div class="form-section mb-5" draggable="true">
                    <span class="drag-handle">&#x2195;</span>
                    <h3 class="font-bold text-base mt-4 border-b pb-1 mb-2">Career Objective</h3>
                    <textarea id="career-objective" class="w-full p-2 border rounded" rows="4"></textarea>
                </div>
                
                <div class="form-section mb-5" draggable="true">
                    <span class="drag-handle">&#x2195;</span>
                    <h3 class="font-bold text-base mt-4 border-b pb-1 mb-2">Academic Qualification</h3>
                    <div id="academic-qualification-container"></div>
                    <button type="button" class="w-full p-2 mt-2 rounded bg-green-600 text-white font-bold cursor-pointer hover:bg-green-700" onclick="addQualificationRow()">+ Add Qualification</button>
                </div>

                <div class="form-section dynamic-section mb-5" id="other-qualification-section" draggable="true">
                    <span class="drag-handle">&#x2195;</span>
                    <h3 class="font-bold text-base mt-4 border-b pb-1 mb-2">Other Qualification</h3>
                    <div class="dynamic-inputs"></div>
                    <button type="button" class="w-full p-2 mt-2 rounded bg-green-600 text-white font-bold cursor-pointer hover:bg-green-700" onclick="addDynamicField('other-qualification-section')">+ Add Other Qualification</button>
                </div>

                <div class="form-section dynamic-section mb-5" id="experience-section" draggable="true">
                    <span class="drag-handle">&#x2195;</span>
                    <h3 class="font-bold text-base mt-4 border-b pb-1 mb-2">Work Experience</h3>
                    <div class="dynamic-inputs"></div>
                    <button type="button" class="w-full p-2 mt-2 rounded bg-green-600 text-white font-bold cursor-pointer hover:bg-green-700" onclick="addDynamicField('experience-section')">+ Add Experience</button>
                </div>
                
                <div id="custom-section-container"></div>
                <div id="custom-section-adder-container">
                    <button type="button" class="w-full p-2 mt-2 rounded bg-blue-500 text-white font-bold cursor-pointer hover:bg-blue-600" onclick="addCustomSection()">+ Add Custom Section</button>
                </div>
                
                <div class="form-section dynamic-section mb-5" id="personal-details-section" draggable="true">
                    <span class="drag-handle">&#x2195;</span>
                    <h3 class="font-bold text-base mt-4 border-b pb-1 mb-2">Personal Details</h3>
                    <div class="dynamic-inputs">
                    </div>
                    <button type="button" class="w-full p-2 mt-2 rounded bg-green-600 text-white font-bold cursor-pointer hover:bg-green-700" onclick="addPersonalDetail()">+ Add Item</button>
                </div>

                <div class="form-section mb-5" draggable="true">
                    <span class="drag-handle">&#x2195;</span>
                    <h3 class="font-bold text-base mt-4 border-b pb-1 mb-2">Declaration</h3>
                    <textarea id="declaration" class="w-full p-2 border rounded" rows="3"></textarea>
                    <input type="text" id="place" class="w-full p-2 border rounded mt-2" placeholder="Place (e.g., Ambajogai) *" required>
                    <label for="date" class="block mt-2 mb-1">Date</label>
                    <input type="date" id="date" class="w-full p-2 border rounded" required>
                </div>
            </form>
            <div class="ad-placeholder h-24 bg-gray-200 border-2 border-dashed flex items-center justify-center my-5 text-gray-500">Advertisement 2</div>
        </div>

        <div class="preview-container w-full resume-preview-wrapper">
            <h2 class="text-xl font-semibold mb-4 print-hide">Resume Preview</h2>
            <div id="resume-preview" class="resume-container">
                <div class="resume-title">RESUME</div>
                <div class="resume-header photo-removed">
                    <div class="header-left">
                        <h1 id="preview-name" class="text-2xl font-bold"></h1>
                        <div class="contact-details-grid mt-4">
                            <b>Address:</b> <span id="preview-address"></span>
                            <b>Mobile:</b> <span id="preview-mobile"></span>
                            <b>Email:</b> <span id="preview-email"></span>
                        </div>
                    </div>
                    <div class="header-right hidden">
                        <img id="preview-photo" src="" alt="Profile Photo">
                    </div>
                </div>
                
                <div id="preview-career-objective-section" style="display: none;">
                    <div class="resume-section-title">CAREER OBJECTIVE</div>
                    <p id="preview-career-objective" class="text-justify"></p>
                </div>
                
                <div id="preview-academic-section" style="display: none;">
                    <div class="resume-section-title">EDUCATIONAL QUALIFICATION</div>
                    <table class="resume-table">
                        <thead>
                            <tr>
                                <th>Serial No.</th>
                                <th>Exam Passed</th>
                                <th>Board/University</th>
                                <th>Year Of Passing</th>
                                <th>Percentage/Grade</th>
                            </tr>
                        </thead>
                        <tbody id="preview-academic-tbody"></tbody>
                    </table>
                </div>

                <div id="preview-other-qualification-section" style="display: none;">
                    <div class="resume-section-title">OTHER QUALIFICATION</div>
                    <ul class="bullet-list preview-list"></ul>
                </div>

                <div id="preview-experience-section" style="display: none;">
                    <div class="resume-section-title">WORK EXPERIENCE</div>
                    <ul class="bullet-list preview-list"></ul>
                </div>
                
                <div id="preview-custom-sections-container"></div>

                <div id="preview-personal-details-section" style="display: none;">
                    <div class="resume-section-title">PERSONAL INFORMATION</div>
                    <div id="preview-personal-details-grid">
                    </div>
                </div>

                <div id="preview-declaration-section" style="display: none;">
                    <div class="resume-section-title">DECLARATION</div>
                    <p id="preview-declaration" class="declaration"></p>
                </div>

                <div class="footer-flex-container">
                    <div>
                        <p><b>Date:</b> <span id="preview-date"></span></p>
                        <p><b>Place:</b> <span id="preview-place"></span></p>
                    </div>
                    <div>
                        <p id="preview-signature" class="text-center font-bold"></p>
                    </div>
                </div>
            </div>
            <div class="print-button-container text-center mt-4 print-hide">
                <button onclick="window.print()" class="print-btn">Print / Save as PDF</button>
            </div>
            <div class="ad-placeholder h-24 bg-gray-200 border-2 border-dashed flex items-center justify-center my-5 text-gray-500">Advertisement 3</div>
        </div>
    </div>

    <footer class="bg-blue-600 text-white text-center p-4 mt-6 print-hide">
        <p>&copy; 2025 Resume Maker | Designed by Shreyas Rathod</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Populate form with initial data
            document.getElementById('full-name').value = "Shreyas D.Rathod";
            document.getElementById('address').value = "At.Ambajogai, Post. Ambajogai Tah. - Ambajogai, Dist. Beed, Maharashtra.431517";
            document.getElementById('mobile').value = "94xxxxxxxx";
            document.getElementById('email').value = "xyz@gmail.com";
            document.getElementById('career-objective').value = "";
            document.getElementById('declaration').value = "I hereby declare that the above information is true and correct to the best of my knowledge and belief";
            document.getElementById('place').value = "Ambajogai";
            document.getElementById('date').value = new Date().toISOString().substring(0, 10); // Automatically set to today's date
        
            // Academic Qualification from PDF
            addQualificationRow({
                qualification: 'S.S.C.',
                university: 'Aurangabad',
                year: '2018',
                percentage: '69.80%'
            });
            addQualificationRow({
                qualification: 'HSC',
                university: 'Aurangabad',
                year: '2022',
                percentage: '60.00%'
            });

            // Personal Details
            addPersonalDetail("Father's Name", "Father Name");
            addPersonalDetail("Date of Birth", "01/01/2000");
            addPersonalDetail("Gender", "Male");
            addPersonalDetail("Nationality", "Indian");
            addPersonalDetail("Languages Known", "Marathi,Hindi,English");
            addPersonalDetail("Voter Id No.", "SOR0000000");
            addPersonalDetail("Aadhaar No.", "XXXX XXXX XXXX");
            
            // Event Listeners
            document.getElementById('resume-form').addEventListener('input', updatePreview);
            document.getElementById('profile-photo').addEventListener('change', updatePhoto);

            // --- Main Section Drag-and-Drop ---
            const formContainer = document.getElementById('form-container');
            let draggedSection = null;

            formContainer.addEventListener('dragstart', (e) => {
                const target = e.target.closest('.form-section');
                if (target) {
                    draggedSection = target;
                    e.dataTransfer.effectAllowed = 'move';
                    e.dataTransfer.setData('text/plain', 'drag');
                    target.classList.add('dragging');
                }
            });

            formContainer.addEventListener('dragover', (e) => {
                e.preventDefault();
                const target = e.target.closest('.form-section');
                if (target && target !== draggedSection && formContainer.contains(target)) {
                    const rect = target.getBoundingClientRect();
                    const isAfter = e.clientY > rect.top + rect.height / 2;
                    
                    const sections = Array.from(formContainer.querySelectorAll('.form-section'));
                    const currentIndex = sections.indexOf(draggedSection);
                    const targetIndex = sections.indexOf(target);

                    if (isAfter && targetIndex > currentIndex) {
                        formContainer.insertBefore(draggedSection, target.nextSibling);
                    } else if (!isAfter && targetIndex < currentIndex) {
                        formContainer.insertBefore(draggedSection, target);
                    }
                }
            });

            formContainer.addEventListener('dragend', () => {
                const sections = formContainer.querySelectorAll('.form-section');
                sections.forEach(section => section.classList.remove('dragging'));
                draggedSection = null;
                updatePreview();
            });

            // --- Personal Details Drag-and-Drop ---
            const personalDetailsContainer = document.querySelector('#personal-details-section .dynamic-inputs');
            let dragSrcEl = null;
        
            personalDetailsContainer.addEventListener('dragstart', (e) => {
                const target = e.target.closest('.draggable');
                if (target) {
                    dragSrcEl = target;
                    e.dataTransfer.effectAllowed = 'move';
                    e.dataTransfer.setData('text/html', target.innerHTML);
                    target.classList.add('opacity-40');
                }
            });
        
            personalDetailsContainer.addEventListener('dragover', (e) => {
                e.preventDefault();
                e.dataTransfer.dropEffect = 'move';
                const target = e.target.closest('.draggable');
                if (target && target !== dragSrcEl && personalDetailsContainer.contains(target)) {
                    target.classList.add('border-blue-500');
                }
            });
        
            personalDetailsContainer.addEventListener('dragleave', (e) => {
                const target = e.target.closest('.draggable');
                if (target) {
                    target.classList.remove('border-blue-500');
                }
            });
        
            personalDetailsContainer.addEventListener('drop', (e) => {
                e.preventDefault();
                const target = e.target.closest('.draggable');
                if (dragSrcEl && target && dragSrcEl !== target && personalDetailsContainer.contains(target)) {
                    if (target.nextSibling === dragSrcEl) {
                        personalDetailsContainer.insertBefore(dragSrcEl, target);
                    } else {
                        personalDetailsContainer.insertBefore(dragSrcEl, target.nextSibling);
                    }
                    target.classList.remove('border-blue-500');
                }
            });
        
            personalDetailsContainer.addEventListener('dragend', (e) => {
                const draggables = personalDetailsContainer.querySelectorAll('.draggable');
                draggables.forEach(item => item.classList.remove('opacity-40', 'border-blue-500'));
                updatePreview();
            });
        
            // Initial preview update
            updatePreview();
        });
        
        function updatePreview() {
            // Update Header
            document.getElementById('preview-name').innerText = document.getElementById('full-name').value || 'Your Name';
            document.getElementById('preview-address').innerText = document.getElementById('address').value || 'Your Address';
            document.getElementById('preview-mobile').innerText = document.getElementById('mobile').value || 'Your Mobile No.';
            document.getElementById('preview-email').innerText = document.getElementById('email').value || 'Your Email';
            document.getElementById('preview-signature').innerText = document.getElementById('full-name').value || 'Your Name';
        
            // Update Career Objective
            const careerObjective = document.getElementById('career-objective').value;
            const objectiveSection = document.getElementById('preview-career-objective-section');
            document.getElementById('preview-career-objective').innerText = careerObjective;
            objectiveSection.style.display = careerObjective.trim() ? 'block' : 'none';
        
            // Update other sections
            updateAcademicPreview();
            updateDynamicSectionPreview('other-qualification-section', 'preview-other-qualification-section');
            updateDynamicSectionPreview('experience-section', 'preview-experience-section');
            updateCustomSectionsPreview();
            updatePersonalDetailsPreview();
            
            // Update Declaration
            const declaration = document.getElementById('declaration').value;
            const declarationSection = document.getElementById('preview-declaration-section');
            document.getElementById('preview-declaration').innerText = declaration;
            declarationSection.style.display = declaration.trim() ? 'block' : 'none';
        
            document.getElementById('preview-place').innerText = document.getElementById('place').value;
            
            const dateValue = document.getElementById('date').value;
            if (dateValue) {
                const [year, month, day] = dateValue.split('-');
                document.getElementById('preview-date').innerText = `${day}/${month}/${year}`;
            }
        }
        
        // --- PHOTO UPLOAD FUNCTION ---
        function updatePhoto() {
            const photoInput = document.getElementById('profile-photo');
            const photoPreview = document.getElementById('preview-photo');
            const headerRight = document.querySelector('.resume-header .header-right');
            const resumeHeader = document.querySelector('.resume-header');
            
            if (photoInput.files && photoInput.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    photoPreview.src = e.target.result;
                    headerRight.classList.remove('hidden');
                    resumeHeader.classList.remove('photo-removed');
                };
                reader.readAsDataURL(photoInput.files[0]);
            } else {
                photoPreview.src = "";
                headerRight.classList.add('hidden');
                resumeHeader.classList.add('photo-removed');
            }
        }
        
        // --- ACADEMIC QUALIFICATION FUNCTIONS ---
        function addQualificationRow(data = {}) {
            const container = document.getElementById('academic-qualification-container');
            const newRow = document.createElement('div');
            newRow.className = 'flex flex-wrap items-center gap-2 mb-2 dynamic-item-wrapper';
            newRow.innerHTML = `
                <input type="text" class="w-1/4 p-2 border rounded" placeholder="Exam Passed (e.g., S.S.C.)" value="${data.qualification || ''}">
                <input type="text" class="w-1/4 p-2 border rounded" placeholder="Board/University" value="${data.university || ''}">
                <input type="text" class="w-1/6 p-2 border rounded" placeholder="Year" value="${data.year || ''}">
                <input type="text" class="w-1/6 p-2 border rounded" placeholder="Percentage/Grade" value="${data.percentage || ''}">
                <button type="button" class="p-2 text-white bg-red-600 rounded cursor-pointer remove-btn hover:bg-red-700" onclick="removeDynamicItem(this)">&times;</button>
            `;
            container.appendChild(newRow);
            updatePreview();
        }
        
        function updateAcademicPreview() {
            const tbody = document.getElementById('preview-academic-tbody');
            const formRows = document.querySelectorAll('#academic-qualification-container .dynamic-item-wrapper');
            let html = '';
            formRows.forEach((row, index) => {
                const inputs = row.querySelectorAll('input');
                const exam = inputs[0].value;
                const university = inputs[1].value;
                const year = inputs[2].value;
                const percentage = inputs[3].value;
        
                if (exam.trim() || university.trim() || year.trim() || percentage.trim()) {
                    html += `
                        <tr>
                            <td>${index + 1}</td>
                            <td>${exam}</td>
                            <td>${university}</td>
                            <td>${year}</td>
                            <td>${percentage}</td>
                        </tr>
                    `;
                }
            });
            tbody.innerHTML = html;
            document.getElementById('preview-academic-section').style.display = html.trim() ? 'block' : 'none';
        }
        
        // --- GENERIC DYNAMIC FIELD FUNCTIONS (Other Qual, Experience) ---
        function addDynamicField(sectionId, initialValue = '') {
            const container = document.querySelector(`#${sectionId} .dynamic-inputs`);
            const newDiv = document.createElement('div');
            newDiv.className = 'dynamic-item-wrapper draggable flex items-center gap-2 mb-2';
            newDiv.draggable = true;
            newDiv.innerHTML = `
                <span class="drag-handle">&#x2195;</span>
                <input type="text" class="w-full p-2 border rounded" placeholder="Enter details..." value="${initialValue}">
                <button type="button" class="p-2 text-white bg-red-600 rounded cursor-pointer remove-btn hover:bg-red-700" onclick="removeDynamicItem(this)">&times;</button>
            `;
            container.appendChild(newDiv);
            updatePreview();
        }
        
        function updateDynamicSectionPreview(formSectionId, previewSectionId) {
            const previewList = document.querySelector(`#${previewSectionId} .preview-list`);
            const formInputs = document.querySelectorAll(`#${formSectionId} .dynamic-inputs input[type="text"]`);
            let html = '';
            formInputs.forEach(input => {
                if (input.value.trim()) {
                    html += `<li>${input.value}</li>`;
                }
            });
            previewList.innerHTML = html;
            document.getElementById(previewSectionId).style.display = html.trim() ? 'block' : 'none';
        }

        // --- CUSTOM SECTION FUNCTIONS ---
        function addCustomSection() {
            const container = document.getElementById('custom-section-container');
            const newSection = document.createElement('div');
            const sectionId = 'custom-section-' + Date.now();
            newSection.className = 'form-section dynamic-section mb-5';
            newSection.id = sectionId;
            newSection.setAttribute('draggable', 'true');
            newSection.innerHTML = `
                <span class="drag-handle">&#x2195;</span>
                <input type="text" class="w-full font-bold text-base mt-4 border-b pb-1 mb-2" placeholder="Section Title">
                <div class="dynamic-inputs"></div>
                <button type="button" class="w-full p-2 mt-2 rounded bg-green-600 text-white font-bold cursor-pointer hover:bg-green-700" onclick="addDynamicField('${sectionId}')">+ Add Item</button>
                <button type="button" class="w-full p-2 mt-2 rounded bg-red-600 text-white font-bold cursor-pointer hover:bg-red-700" onclick="removeDynamicSection(this)">Remove Section</button>
            `;
            container.appendChild(newSection);
        }

        function updateCustomSectionsPreview() {
            const previewContainer = document.getElementById('preview-custom-sections-container');
            previewContainer.innerHTML = '';
            const customSections = document.querySelectorAll('#custom-section-container .form-section');
            customSections.forEach(section => {
                const titleInput = section.querySelector('input[type="text"]');
                const listItems = section.querySelectorAll('.dynamic-inputs input');
                
                const sectionTitle = titleInput ? titleInput.value.trim() : '';
                
                if (sectionTitle) {
                    let itemsHtml = '';
                    listItems.forEach(item => {
                        if (item.value.trim()) {
                            itemsHtml += `<li>${item.value}</li>`;
                        }
                    });
                    if (itemsHtml) {
                        const newPreview = document.createElement('div');
                        newPreview.innerHTML = `<div class="resume-section-title">${sectionTitle.toUpperCase()}</div><ul class="bullet-list preview-list">${itemsHtml}</ul>`;
                        previewContainer.appendChild(newPreview);
                    }
                }
            });
        }
        
        function removeDynamicItem(button) {
            button.closest('.dynamic-item-wrapper').remove();
            updatePreview();
        }
        
        function removeDynamicSection(button) {
            button.closest('.form-section').remove();
            updatePreview();
        }
        
        function addPersonalDetail(key = '', value = '') {
            const container = document.querySelector('#personal-details-section .dynamic-inputs');
            const newDiv = document.createElement('div');
            newDiv.className = 'dynamic-item-wrapper draggable flex items-center gap-2 mb-2';
            newDiv.draggable = true;
            newDiv.innerHTML = `
                <span class="drag-handle">&#x2195;</span>
                <input type="text" class="w-2/5 p-2 border rounded detail-key" placeholder="Key (e.g., Father's Name)" value="${key}">
                <input type="text" class="flex-1 p-2 border rounded detail-value" placeholder="Value (e.g., Pandit Jijabhau)" value="${value}">
                <button type="button" class="p-2 text-white bg-red-600 rounded cursor-pointer remove-btn hover:bg-red-700" onclick="removeDynamicItem(this)">&times;</button>
            `;
            container.appendChild(newDiv);
            updatePreview();
        }

        function updatePersonalDetailsPreview() {
            const previewContainer = document.getElementById('preview-personal-details-grid');
            const formItems = document.querySelectorAll('#personal-details-section .dynamic-item-wrapper');
            let hasContent = false;
            let html = '';
        
            formItems.forEach(item => {
                const keyInput = item.querySelector('.detail-key');
                const valueInput = item.querySelector('.detail-value');
                const key = keyInput ? keyInput.value.trim() : '';
                const value = valueInput ? valueInput.value.trim() : '';
        
                if (key && value) {
                    hasContent = true;
                    // Changed the HTML generation to use grid layout
                    html += `<b>${key}:</b><span> ${value}</span>`;
                }
            });
        
            previewContainer.innerHTML = html;
            document.getElementById('preview-personal-details-section').style.display = hasContent ? 'block' : 'none';
        }
    </script>
</body>
</html>